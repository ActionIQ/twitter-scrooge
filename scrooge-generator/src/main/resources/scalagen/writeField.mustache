{{#optional}}
if ({{fieldName}}.isDefined) {
{{/optional}}
{{^optional}}
{{#nullable}}
if ({{fieldName}} ne null) {
{{/nullable}}
{{/optional}}
  val _value = {{fieldName}}{{#optional}}.get{{/optional}}
  _oprot.writeFieldBegin({{fieldConst}}{{#isEnum}}I32{{/isEnum}})
  {{>writeValue}}
  _oprot.writeFieldEnd()
{{#optional}}
  }
{{/optional}}
{{^optional}}{{#nullable}}
}
{{/nullable}}{{/optional}}
